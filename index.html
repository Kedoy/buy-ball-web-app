<!DOCTYPE html>
<html>
<head>
    <title>–ë–∏–ª–µ—Ç—ã –Ω–∞ –†–æ–∂–¥–µ—Å—Ç–≤–µ–Ω—Å–∫–∏–π –ë–∞–ª</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { padding: 20px; font-family: Arial, sans-serif; }
        .form-group { margin-bottom: 15px; }
        input, select { width: 100%; padding: 12px; margin: 5px 0; border: 1px solid #ddd; border-radius: 8px; }
        .btn { background: #0088cc; color: white; padding: 15px; border: none; border-radius: 8px; width: 100%; font-size: 16px; }
    </style>
</head>
<body>
    <div class="container">
        <h2>üéÑ –ü–æ–∫—É–ø–∫–∞ –±–∏–ª–µ—Ç–æ–≤</h2>
        
        <form id="orderForm">
            <div class="form-group">
                <input type="text" name="name" placeholder="–í–∞—à–µ –∏–º—è" required>
            </div>
            <div class="form-group">
                <input type="text" name="lastname" placeholder="–í–∞—à–∞ —Ñ–∞–º–∏–ª–∏—è" required>
            </div>
            <div class="form-group">
                <input type="tel" name="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω +7XXXXXXXXXX" required pattern="\+7[0-9]{10}">
            </div>
            <div class="form-group">
                <select name="tickets" required>
                    <option value="">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∏–ª–µ—Ç–æ–≤</option>
                    <option value="1">1 –±–∏–ª–µ—Ç</option>
                    <option value="2">2 –±–∏–ª–µ—Ç–∞</option>
                    <option value="3">3 –±–∏–ª–µ—Ç–∞</option>
                </select>
            </div>
            <button type="submit" class="btn">üé´ –ö—É–ø–∏—Ç—å –±–∏–ª–µ—Ç—ã</button>
        </form>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        
        // –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–ª—è BotFather –∫–Ω–æ–ø–∫–∏!
        tg.expand();
        tg.ready();
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –æ—Ç–∫—É–¥–∞ –æ—Ç–∫—Ä—ã—Ç Web App
        const urlParams = new URLSearchParams(window.location.search);
        const source = urlParams.get('startapp');
        console.log('Web App opened from:', source || 'unknown');
        
        document.getElementById('orderForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const orderData = {
                name: formData.get('name'),
                lastname: formData.get('lastname'),
                phone: formData.get('phone'),
                tickets: formData.get('tickets')
            };
            
            console.log('Sending data:', orderData);
            
            // –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û –¥–ª—è BotFather –∫–Ω–æ–ø–∫–∏!
            tg.sendData(JSON.stringify(orderData));
            
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
            setTimeout(() => {
                tg.close();
            }, 1000);
        });
        
        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        tg.MainButton.setText("–ö—É–ø–∏—Ç—å –±–∏–ª–µ—Ç—ã");
        tg.MainButton.show();
    </script>
</body>
</html>
